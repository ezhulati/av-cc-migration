---
/**
 * Activity Page - Uses shared ArticleLayout
 * All styling and structure comes from ArticleLayout.astro
 */

import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import ArticleLayout from '../../layouts/ArticleLayout.astro';

export async function getStaticPaths() {
  const activities = await getCollection('activities', ({ data }) => {
    return data && (!data.language || data.language === 'en');
  });

  return activities.map(activity => ({
    params: { slug: activity.slug },
    props: { activity },
  }));
}

interface Props {
  activity: CollectionEntry<'activities'>;
}

const { activity } = Astro.props;
const { Content } = await activity.render();

const {
  title,
  description,
  category,
  featuredImage,
  language,
} = activity.data;

const slug = activity.slug;

// Build breadcrumbs
const breadcrumbs = [
  { label: 'Home', href: '/' },
  { label: 'Activities', href: '/activities/' },
];
if (category) {
  breadcrumbs.push({ label: category });
}

// Build sidebar info items
const infoItems = [
  category && { icon: '🎯', label: 'Category', value: category },
  { icon: '🇦🇱', label: 'Country', value: 'Albania' },
  { icon: '💬', label: 'Languages', value: 'Albanian, English' },
].filter(Boolean);

// Navigation links
const navigationLinks = [
  { label: '← All Activities', href: '/activities/' },
  { label: 'Destinations', href: '/destinations/' },
  { label: 'Top Attractions', href: '/attractions/' },
];
---

<ArticleLayout
  title={`${title} - Activities in Albania`}
  description={description}
  canonical={`https://albaniavisit.com/activities/${slug}/`}
  image={featuredImage}
  language={language}
  heroTitle={title}
  heroSubtitle={description}
  featuredImage={featuredImage}
  breadcrumbs={breadcrumbs}
  infoItems={infoItems}
  navigationLinks={navigationLinks}
  contentType="activity"
>
  <Content />
</ArticleLayout>
