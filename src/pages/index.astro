---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

const posts = await getCollection('posts', ({ data }) => {
  return data.language === 'en';
});

const accommodation = await getCollection('accommodation', ({ data }) => {
  return data.language === 'en';
});

const pages = await getCollection('pages', ({ data }) => {
  return data.language === 'en';
});

// Sort posts by date (most recent first)
posts.sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());
---

<BaseLayout
  title="Discover Albania - Your Complete Travel Guide"
  description="Plan your perfect Albanian adventure. Explore 6,900+ accommodations, travel guides, and insider tips for visiting Albania."
>
  <!-- Hero Section with Image Slider -->
  <section class="hero-slider">
    <div class="slider-container">
      <!-- Slide 1: Berat Castle -->
      <div class="slide active" style="background-image: url('/images/hero/berat-castle.jpg');">
        <div class="slide-overlay"></div>
      </div>
      <!-- Slide 2: Vjosa River -->
      <div class="slide" style="background-image: url('/images/hero/vjosa-river.jpg');">
        <div class="slide-overlay"></div>
      </div>
      <!-- Slide 3: Butrint -->
      <div class="slide" style="background-image: url('/images/hero/butrint.jpg');">
        <div class="slide-overlay"></div>
      </div>
      <!-- Slide 4: Jale Beach -->
      <div class="slide" style="background-image: url('/images/hero/jale-beach.jpg');">
        <div class="slide-overlay"></div>
      </div>
      <!-- Slide 5: Tirana Opera -->
      <div class="slide" style="background-image: url('/images/hero/tirana-opera.jpg');">
        <div class="slide-overlay"></div>
      </div>
    </div>

    <!-- Hero Content Overlay -->
    <div class="hero-content">
      <h1 class="hero-title animate-fade-in">Visit Albania</h1>
      <p class="hero-description animate-slide-up max-w-4xl mx-auto">
        From the turquoise waters of the Ionian coast to the peaks of the Albanian Alps, a country where Roman ruins meet Ottoman architecture.
      </p>
      <div class="hero-cta">
        <a href="/destinations/" class="btn bg-white text-primary hover:bg-white/90 px-8 py-4 shadow-lg">
          Explore Destinations
        </a>
        <a href="/accommodation/" class="btn bg-white/20 text-white hover:bg-white/30 px-8 py-4 border-2 border-white">
          Find Accommodation
        </a>
      </div>
    </div>

    <!-- Slider Navigation Dots -->
    <div class="slider-dots">
      <button class="dot active" data-slide="0" aria-label="Slide 1"></button>
      <button class="dot" data-slide="1" aria-label="Slide 2"></button>
      <button class="dot" data-slide="2" aria-label="Slide 3"></button>
      <button class="dot" data-slide="3" aria-label="Slide 4"></button>
      <button class="dot" data-slide="4" aria-label="Slide 5"></button>
    </div>
  </section>

  <script>
    // Hero Slider Script
    let currentSlide = 0;
    const slides = document.querySelectorAll('.slide');
    const dots = document.querySelectorAll('.slider-dots .dot');
    const totalSlides = slides.length;
    const slideInterval = 5000; // 5 seconds per slide

    function showSlide(index: number) {
      // Remove active class from all slides and dots
      slides.forEach(slide => slide.classList.remove('active'));
      dots.forEach(dot => dot.classList.remove('active'));

      // Add active class to current slide and dot
      slides[index].classList.add('active');
      dots[index].classList.add('active');
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      showSlide(currentSlide);
    }

    // Auto-advance slides
    let slideTimer = setInterval(nextSlide, slideInterval);

    // Manual navigation via dots
    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentSlide = index;
        showSlide(currentSlide);
        // Reset timer on manual navigation
        clearInterval(slideTimer);
        slideTimer = setInterval(nextSlide, slideInterval);
      });
    });

    // Pause on hover
    const sliderContainer = document.querySelector('.hero-slider');
    sliderContainer?.addEventListener('mouseenter', () => {
      clearInterval(slideTimer);
    });

    sliderContainer?.addEventListener('mouseleave', () => {
      slideTimer = setInterval(nextSlide, slideInterval);
    });
  </script>

  <style>
    /* Hero Slider Styles */
    .hero-slider {
      position: relative;
      width: 100%;
      height: 90vh;
      min-height: 600px;
      overflow: hidden;
    }

    .slider-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      opacity: 0;
      transition: opacity 1.5s ease-in-out;
      z-index: 1;
    }

    .slide.active {
      opacity: 1;
      z-index: 2;
    }

    .slide-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6));
      z-index: 1;
    }

    /* Hero Content Overlay */
    .hero-slider .hero-content {
      position: relative;
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      padding: 2rem;
      text-align: center;
      color: white;
    }

    .hero-slider .hero-title {
      font-size: clamp(3rem, 8vw, 6rem);
      font-weight: 800;
      margin-bottom: 1.5rem;
      letter-spacing: -0.02em;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .hero-slider .hero-description {
      font-size: clamp(1.125rem, 2vw, 1.5rem);
      margin-bottom: 2.5rem;
      line-height: 1.6;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }

    .hero-slider .hero-cta {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }

    /* Slider Dots Navigation */
    .slider-dots {
      position: absolute;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 0.75rem;
      z-index: 10;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      border: 2px solid transparent;
      cursor: pointer;
      transition: all 0.3s ease;
      padding: 0;
    }

    .dot:hover {
      background: rgba(255, 255, 255, 0.8);
      transform: scale(1.2);
    }

    .dot.active {
      background: white;
      border-color: white;
      transform: scale(1.3);
    }

    /* Animations */
    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slide-up {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-fade-in {
      animation: fade-in 1s ease-out forwards;
    }

    .animate-slide-up {
      animation: slide-up 1s ease-out 0.3s forwards;
      opacity: 0;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero-slider {
        height: 70vh;
        min-height: 500px;
      }

      .hero-slider .hero-cta {
        flex-direction: column;
        width: 100%;
        max-width: 300px;
      }

      .slider-dots {
        bottom: 1rem;
      }

      .dot {
        width: 10px;
        height: 10px;
      }
    }
  </style>

  <!-- Stats Section -->
  <section class="stats-section">
    <div class="stats-grid">
      <div class="stat-item animate-slide-up">
        <div class="stat-value">{accommodation.length.toLocaleString()}</div>
        <div class="stat-label">Accommodations</div>
      </div>
      <div class="stat-item animate-slide-up" style="animation-delay: 0.1s;">
        <div class="stat-value">{posts.length}</div>
        <div class="stat-label">Travel Articles</div>
      </div>
      <div class="stat-item animate-slide-up" style="animation-delay: 0.2s;">
        <div class="stat-value">{pages.length}</div>
        <div class="stat-label">Travel Guides</div>
      </div>
    </div>
  </section>

  <!-- Best Places to Visit -->
  <section class="section bg-background">
    <div class="container-custom max-w-7xl">
      <h2 class="text-3xl md:text-4xl font-bold tracking-tight mb-12 text-center">Best Places to Visit</h2>

      <div class="grid md:grid-cols-2 gap-8">
        <!-- Tirana -->
        <div class="card-hover p-8">
          <h3 class="text-2xl font-semibold mb-4 text-primary">
            <a href="/destinations/tirana/" class="hover:text-primary/80 transition-colors">Tirana</a>
          </h3>
          <p class="text-muted-foreground leading-7">
            The capital's architecture chronicles every era‚Äîthe Et'hem Bey Mosque (1794), Italian-designed boulevards, and converted bunker museums. The National Historical Museum holds Albania's archaeological treasures while Blloku neighborhood pulses with contemporary culture.
          </p>
          <a href="/destinations/tirana/" class="inline-flex items-center gap-2 mt-4 text-primary font-semibold hover:text-primary/80">
            Explore Tirana
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>

        <!-- Beaches -->
        <div class="card-hover p-8">
          <h3 class="text-2xl font-semibold mb-4 text-primary">
            <a href="/destinations/albanian-riviera/" class="hover:text-primary/80 transition-colors">Beaches</a>
          </h3>
          <p class="text-muted-foreground leading-7">
            The Albanian Riviera at Ksamil, Himar√´, and Dh√´rmi offers ancient sites alongside turquoise waters. Butrint Archaeological Park nearby layers Greek, Roman, and Byzantine ruins. Porto Palermo Castle guards the coast with Ali Pasha's 19th-century fortress.
          </p>
          <a href="/destinations/albanian-riviera/" class="inline-flex items-center gap-2 mt-4 text-primary font-semibold hover:text-primary/80">
            Explore the Riviera
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>

        <!-- Berat and Gjirokast√´r -->
        <div class="card-hover p-8">
          <h3 class="text-2xl font-semibold mb-4 text-primary">
            <a href="/destinations/berat/" class="hover:text-primary/80 transition-colors">Berat and Gjirokast√´r</a>
          </h3>
          <p class="text-muted-foreground leading-7">
            These UNESCO World Heritage towns preserve Ottoman architecture and traditions. Berat's citadel houses Byzantine churches with original frescoes. Gjirokast√´r's stone tower houses showcase traditional building techniques and ethnographic collections.
          </p>
          <a href="/destinations/berat/" class="inline-flex items-center gap-2 mt-4 text-primary font-semibold hover:text-primary/80">
            Discover UNESCO Sites
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>

        <!-- Shkodra and Albanian Alps -->
        <div class="card-hover p-8">
          <h3 class="text-2xl font-semibold mb-4 text-primary">
            <a href="/destinations/shkoder/" class="hover:text-primary/80 transition-colors">Shkodra and the Albanian Alps</a>
          </h3>
          <p class="text-muted-foreground leading-7">
            Northern mountain communities maintain sworn virgin traditions and customary law practices. Stone kulle (tower houses) mark villages where iso-polyphonic singing and oral epic poetry continue.
          </p>
          <a href="/destinations/shkoder/" class="inline-flex items-center gap-2 mt-4 text-primary font-semibold hover:text-primary/80">
            Visit the Alps
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Things to Do (Experiences) -->
  <section class="section bg-muted/30">
    <div class="container-custom max-w-7xl">
      <div class="flex justify-between items-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold tracking-tight">Things to Do</h2>
        <a href="/activities/" class="btn-ghost">
          View All Activities
          <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="card p-6">
          <div class="text-4xl mb-4">üèõÔ∏è</div>
          <h3 class="text-xl font-semibold mb-3">Archaeological Sites</h3>
          <p class="text-sm text-muted-foreground mb-4">
            Explore archaeological sites with local historians from ancient Apollonia to medieval Kruj√´ Castle.
          </p>
          <a href="/activities/archaeological-tours/" class="text-primary text-sm font-semibold hover:text-primary/80">
            Learn More ‚Üí
          </a>
        </div>

        <div class="card p-6">
          <div class="text-4xl mb-4">üé®</div>
          <h3 class="text-xl font-semibold mb-3">Traditional Crafts</h3>
          <p class="text-sm text-muted-foreground mb-4">
            Learn traditional crafts in working workshops‚Äîsilver filigree, stone carving, carpet weaving.
          </p>
          <a href="/activities/cultural-workshops/" class="text-primary text-sm font-semibold hover:text-primary/80">
            Learn More ‚Üí
          </a>
        </div>

        <div class="card p-6">
          <div class="text-4xl mb-4">üèõÔ∏è</div>
          <h3 class="text-xl font-semibold mb-3">Ottoman Heritage</h3>
          <p class="text-sm text-muted-foreground mb-4">
            Tour Ottoman-era houses converted to cultural museums throughout historic towns.
          </p>
          <a href="/attractions/ottoman-architecture/" class="text-primary text-sm font-semibold hover:text-primary/80">
            Learn More ‚Üí
          </a>
        </div>

        <div class="card p-6">
          <div class="text-4xl mb-4">üéµ</div>
          <h3 class="text-xl font-semibold mb-3">UNESCO Polyphonic Singing</h3>
          <p class="text-sm text-muted-foreground mb-4">
            Experience UNESCO-recognized polyphonic singing at village festivals and cultural events.
          </p>
          <a href="/activities/cultural-experiences/" class="text-primary text-sm font-semibold hover:text-primary/80">
            Learn More ‚Üí
          </a>
        </div>

        <div class="card p-6">
          <div class="text-4xl mb-4">‚õ™</div>
          <h3 class="text-xl font-semibold mb-3">Byzantine Churches</h3>
          <p class="text-sm text-muted-foreground mb-4">
            Visit Byzantine churches and monasteries with preserved frescoes throughout the country.
          </p>
          <a href="/attractions/byzantine-heritage/" class="text-primary text-sm font-semibold hover:text-primary/80">
            Learn More ‚Üí
          </a>
        </div>

        <div class="card p-6">
          <div class="text-4xl mb-4">ü•æ</div>
          <h3 class="text-xl font-semibold mb-3">Ancient Trade Routes</h3>
          <p class="text-sm text-muted-foreground mb-4">
            Hike ancient trade routes connecting coastal settlements to mountain communities.
          </p>
          <a href="/activities/hiking-trails/" class="text-primary text-sm font-semibold hover:text-primary/80">
            Learn More ‚Üí
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- When to Visit & Practical Tips -->
  <section class="section bg-background">
    <div class="container-custom max-w-7xl">
      <div class="grid lg:grid-cols-2 gap-12">
        <!-- When to Visit -->
        <div>
          <h2 class="text-3xl font-bold tracking-tight mb-6">When to Visit</h2>
          <div class="prose prose-lg">
            <p class="text-muted-foreground leading-7 mb-6">
              Spring (April-May) and autumn (September-November) offer ideal weather for archaeological sites and cultural touring. Summer festivals showcase traditional music and dance, while winter allows intimate experiences in museums and mountain guesthouses.
            </p>
            <a href="/best-time-to-visit-albania/" class="inline-flex items-center gap-2 text-primary font-semibold hover:text-primary/80">
              Read Full Guide
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
        </div>

        <!-- Practical Tips -->
        <div>
          <h2 class="text-3xl font-bold tracking-tight mb-6">Practical Tips</h2>
          <ul class="space-y-4">
            <li class="flex gap-3">
              <svg class="w-6 h-6 text-primary flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span class="text-muted-foreground">Archaeological sites and museums typically charge ‚Ç¨2-10 entrance fees</span>
            </li>
            <li class="flex gap-3">
              <svg class="w-6 h-6 text-primary flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span class="text-muted-foreground">Licensed guides enhance understanding at major historical sites</span>
            </li>
            <li class="flex gap-3">
              <svg class="w-6 h-6 text-primary flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span class="text-muted-foreground">Traditional guesthouses in mountain villages follow ancient hospitality customs</span>
            </li>
            <li class="flex gap-3">
              <svg class="w-6 h-6 text-primary flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
              <span class="text-muted-foreground">Local buses reach most cultural sites; some mountain locations require private transport</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Latest Articles -->
  <section class="section">
    <div class="container-custom max-w-7xl">
      <div class="flex justify-between items-center mb-12">
        <h2 class="text-3xl md:text-4xl font-bold tracking-tight">Latest Travel Articles</h2>
        <a href="/blog/" class="btn-ghost">
          View All
          <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </a>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {posts.slice(0, 6).map(post => (
          <article class="blog-card">
            {post.data.featuredImage ? (
              <a href={`/${post.data.slug || post.slug}/`} class="block">
                <div class="blog-card-image">
                  <img
                    src={post.data.featuredImage}
                    alt={post.data.title}
                    class="w-full h-full object-cover"
                    loading="lazy"
                  />
                </div>
              </a>
            ) : (
              <div class="blog-card-image hero-gradient"></div>
            )}
            <div class="blog-card-body">
              <h3 class="blog-card-title">
                <a href={`/${post.data.slug || post.slug}/`}>
                  {post.data.title}
                </a>
              </h3>
              <p class="blog-card-description">
                {post.data.description}
              </p>
              <div class="blog-card-meta">
                <span class="flex items-center gap-2">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                  </svg>
                  {post.data.author || 'AlbaniaVisit'}
                </span>
                <a href={`/${post.data.slug || post.slug}/`} class="text-primary hover:text-primary/80 font-semibold inline-flex items-center gap-1">
                  Read More
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </a>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="bg-secondary text-secondary-foreground section mt-20">
    <div class="container-custom max-w-7xl text-center">
      <h2 class="text-4xl md:text-5xl font-bold mb-6">Ready to Explore Albania?</h2>
      <p class="text-xl mb-8 opacity-90 max-w-2xl mx-auto">
        Browse thousands of accommodations across Albania's most beautiful destinations.
      </p>
      <a href="/accommodation/" class="btn-primary text-lg inline-flex items-center gap-2">
        Explore Accommodation
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
        </svg>
      </a>
    </div>
  </section>
</BaseLayout>
